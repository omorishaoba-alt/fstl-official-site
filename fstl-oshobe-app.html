<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FSTL OSHOBE Pilot</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:#002855; /* FSTL blue */
  color:#ffffff;
}
header{
  padding:20px;
  text-align:center;
  background:#001f3f; /* darker blue */
}
.screen{
  display:none;
  padding:20px;
}
.active{display:block}
button{
  width:100%;
  padding:14px;
  margin-top:12px;
  font-size:16px;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
button.primary{background:#0074D9;color:#fff;}
input,textarea{
  width:100%;
  padding:10px;
  margin-top:10px;
  font-size:15px;
  border-radius:4px;
  border:1px solid #ccc;
}
.card{
  background:#f5f5f5;
  color:#000;
  padding:12px;
  margin-top:10px;
  border-radius:6px;
}
.badge{
  display:inline-block;
  padding:4px 8px;
  font-size:12px;
  border-radius:4px;
  margin-top:6px;
}
.pending{background:#f0ad4e;color:#000}
.reviewed{background:#5cb85c;color:#fff}
.delivered{background:#0074D9;color:#fff}
.small{font-size:13px;opacity:.9;margin-top:10px}
.dashboard{background:#001f3f;padding:12px;border-radius:6px;margin-bottom:12px;}
</style>
</head>
<body>

<header>
  <h2>FSTL OSHOBE Pilot</h2>
  <div class="small">Agent Operational Interface</div>
</header>

<!-- LOGIN / AGENT ID -->
<div id="login" class="screen active">
  <h3>Enter Agent Name</h3>
  <input id="agentName" placeholder="Agent Name">
  <button class="primary" onclick="login()">Enter</button>
</div>

<!-- HOME -->
<div id="home" class="screen">
  <div class="dashboard" id="dashboard">
    <strong>Dashboard:</strong> Pending: 0 | Reviewed: 0 | Delivered: 0
  </div>
  <p class="small">
    <strong>Agent Fee Applies:</strong> 10% per successful engagement.
  </p>
  <p class="small">
    <strong>Why OSHOBE?</strong> Automatically records submissions, tracks status, timestamps entries, and organizes opportunities efficiently. Agents focus on fieldwork; OSHOBE carries the administrative tasks.
  </p>
  <button class="primary" onclick="go('submit')">Record a Property Matter</button>
  <button class="primary" onclick="go('records')">View My Records</button>
  <button onclick="logout()">Logout</button>
</div>

<!-- SUBMIT -->
<div id="submit" class="screen">
  <h3>Record Property Information</h3>
  <input id="name" placeholder="Your name">
  <input id="contact" placeholder="Phone or email">
  <input id="location" placeholder="Property location">
  <textarea id="details" rows="4" placeholder="Describe the matter"></textarea>
  <button class="primary" onclick="save()">Submit</button>
  <button onclick="go('home')">Cancel</button>
</div>

<!-- RECORDS -->
<div id="records" class="screen">
  <h3>My Records</h3>
  <div id="list"></div>
  <button class="primary" onclick="go('home')">Back</button>
</div>

<script>
let currentAgent='';

function login(){
  let agent=agentName.value.trim();
  if(!agent){ alert('Please enter your name'); return; }
  currentAgent=agent;
  agentName.value='';
  go('home');
  updateDashboard();
}

function logout(){
  currentAgent='';
  go('login');
}

function go(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  if(id==='records'){ load(); }
  if(id==='home'){ updateDashboard(); }
}

function save(){
  if(!name.value||!contact.value||!location.value||!details.value){
    alert('Please complete all fields'); return;
  }
  const rec={
    agent: currentAgent,
    name:name.value,
    contact:contact.value,
    location:location.value,
    details:details.value,
    status:'Pending',
    time:new Date().toLocaleString()
  };
  let data=JSON.parse(localStorage.getItem('fstl_oshobe')||'[]');
  data.push(rec);
  localStorage.setItem('fstl_oshobe',JSON.stringify(data));
  alert('Recorded as Pending');
  name.value=''; contact.value=''; location.value=''; details.value='';
  go('records');
}

function toggle(i){
  let data=JSON.parse(localStorage.getItem('fstl_oshobe')||'[]');
  let agentData=data.filter(d=>d.agent===currentAgent);
  let record=data.indexOf(agentData[i]);
  switch(data[record].status){
    case 'Pending': data[record].status='Reviewed'; break;
    case 'Reviewed': data[record].status='Delivered'; break;
    case 'Delivered': data[record].status='Pending'; break;
  }
  localStorage.setItem('fstl_oshobe',JSON.stringify(data));
  load();
  updateDashboard();
}

function load(){
  let data=JSON.parse(localStorage.get