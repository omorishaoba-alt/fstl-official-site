<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FSTL OSHOBE</title>
<meta name="theme-color" content="#0b3d2e">
<style>
body { margin:0; font-family: Arial,sans-serif; background:#f4f6f5; }
#splash { position:fixed; top:0; left:0; width:100%; height:100%; background:#0b3d2e; color:#fff; display:flex; justify-content:center; align-items:center; flex-direction:column; z-index:1000; }
#app { display:none; }
button { padding:12px; font-size:16px; cursor:pointer; margin-top:20px; width:100%; }
header { background:#0b3d2e; color:#fff; padding:16px; text-align:center; }
section { padding:16px; }
.card { background:#fff; padding:12px; margin-bottom:10px; border-radius:6px; }
input { width:100%; padding:8px; margin-bottom:8px; }
.small { font-size:12px; color:#fff; }
</style>
</head>
<body>

<!-- Splash Screen -->
<div id="splash">
  <h1>WELCOME TO FSTL OSHOBE</h1>
  <p>Tap to Enter App</p>
  <button onclick="enterApp()">ENTER</button>
</div>

<!-- Main App -->
<div id="app">
<header>
  <h2>FSTL OSHOBE</h2>
  <div class="small">Title & Mortgage Insurance Delivery Engine</div>
</header>
<section>
  <div class="card">
    <h3>Client Request (LIFT)</h3>
    <input id="name" placeholder="Client Name">
    <input id="phone" placeholder="Phone">
    <input id="property" placeholder="Property Location">
    <button onclick="submitRequest()">Submit Request</button>
  </div>

  <div class="card">
    <h3>Agent Dashboard (DELIVER)</h3>
    <div id="jobs">No jobs yet.</div>
  </div>
</section>
</div>

<script>
let jobs = [];

function enterApp() {
  document.getElementById('splash').style.display='none';
  document.getElementById('app').style.display='block';
}

function submitRequest() {
  const job = {
    name: document.getElementById('name').value,
    phone: document.getElementById('phone').value,
    property: document.getElementById('property').value,
    status: "PENDING"
  };
  jobs.push(job);
  renderJobs();
  alert("Request lifted into FSTL OSHOBE");
}

function deliver(index) {
  jobs[index].status = "DELIVERED";
  alert("Delivered ✔️\nRevenue split: 90% FSTL | 10% Agent (mocked)");
  renderJobs();
}

function renderJobs() {
  const el = document.getElementById("jobs");
  if (!jobs.length) { el.innerHTML = "No jobs yet."; return; }
  el.innerHTML = jobs.map((j,i)=>`
    <div class="card">
      <b>${j.property}</b><br>
      ${j.name} (${j.phone})<br>
      Status: <b>${j.status}</b><br>
      ${j.status==="PENDING"?`<button onclick="deliver(${i})">Deliver</button>`:""}
    </div>
  `).join("");
}

// ⚠️ Removed service worker temporarily to fix ENTER button
</script>

</body>
</html>